<section class="cats">
  <!-- Header superior -->
  <header class="cats-head">
    <div class="kicker">
      <span class="dot"></span>
      <span class="txt">SISTEMA ACTIVO</span>
    </div>

    <div class="title-row">
      <div class="title-block">
        <h1>ESTRUCTURA DE DATOS</h1>
        <h2>Nodos de Categor√≠a</h2>
        <p>Gesti√≥n estructural del inventario</p>
      </div>

      <button class="btn-outline" type="button" (click)="openCreate()" [disabled]="loading()">
        <span class="plus">+</span>
        CREAR NODO
      </button>
    </div>
  </header>

  <!-- Panel inline (tipo modal horizontal) -->
  <section class="inline-panel" *ngIf="creating() || editingId()">
    <div class="inline-top">
      <div class="inline-title">
        <span class="tag">
          {{ editingId() ? 'EDITAR CATEGOR√çA' : 'INICIALIZAR NUEVA CATEGOR√çA' }}
        </span>
      </div>

      <div class="actions">
        <button
          class="btn-ok"
          type="button"
          (click)="editingId() ? saveEdit() : create()"
          [disabled]="loading()"
          title="Guardar"
        >
          ‚úì
        </button>

        <button
          class="btn-cancel"
          type="button"
          (click)="editingId() ? cancelEdit() : cancelCreate()"
          [disabled]="loading()"
          title="Cancelar"
        >
          ‚úï
        </button>
      </div>
    </div>

    <div class="inline-body">
      <label>Nombre</label>
      <input
        type="text"
        [ngModel]="nombreNuevo()"
        (ngModelChange)="nombreNuevo.set($event)"
        placeholder="Nombre de la categor√≠a..."
        autocomplete="off"
      />

      <label class="mt">Descripci√≥n (opcional)</label>
      <input
        type="text"
        [ngModel]="descripcionNueva()"
        (ngModelChange)="descripcionNueva.set($event)"
        placeholder="Ej: Prendas superiores, etc."
        autocomplete="off"
      />
    </div>

    <div class="inline-meta">
      <span class="chip">Total: {{ categorias().length }}</span>
      <span class="chip" *ngIf="loading()">Procesando...</span>
      <span class="chip danger" *ngIf="error()">{{ error() }}</span>
    </div>
  </section>

  <!-- Grilla de Cards -->
  <section class="grid">
    <article class="node" *ngFor="let c of categorias(); trackBy: trackById">
      <div class="node-icon">
        <!-- icono simple (no dependemos de librer√≠as) -->
        <span class="stack"></span>
      </div>

      <div class="node-content">
        <div class="node-name">{{ c.nombre }}</div>
        <div class="node-id">ID: {{ c.id }}</div>

        <div class="node-desc" *ngIf="c.descripcion">{{ c.descripcion }}</div>
      </div>

      <!-- Acciones (opcionales, aparecen al hover) -->
      <div class="node-actions">
        <button class="icon-btn" type="button" (click)="startEdit(c)" title="Editar" [disabled]="loading()">
          ‚úé
        </button>
        <button class="icon-btn danger" type="button" (click)="remove(c.id)" title="Eliminar" [disabled]="loading()">
          üóë
        </button>
      </div>
    </article>
  </section>

  <!-- Error global si no est√° abierto el panel -->
  <div class="global-error" *ngIf="error() && !(creating() || editingId())">
    {{ error() }}
  </div>
</section>